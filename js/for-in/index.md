---
title: "`for...in`"
description: "Цикл `for...in` обходит перечисляемые ключи объекта"
authors:
  - windrushfarer
tags:
  - doka
---

## Кратко

`for...in` позволяет пройти в [цикле](/js/loop/) по перечисляемым свойствам объекта, в том числе по свойствам из прототипа.

Перечисляемые свойства – это свойства, которые разработчик добавляет объекту. Встроенные и символьные свойства, например `length` у массива, не обходятся в цикле `for...in`.

## Пример

```js
const cat = {
  name: 'Борис',
  color: 'red',
  age: 8
}

for (const key in cat) {
  console.log(`${key} – ${cat[key]}`)
}
// name – 'Борис',
// color – 'red',
// age – 8
```

## Как пишется

Схематично структура создания цикла выглядит так:

```js
for (переменная in объект) {
  // действия внутри цикла
}
```

Необходимо объявить переменную и указать объект, свойства которого нужно обойти. В объявленной переменной будет храниться имя свойства во время итерации.


## Как это понять

Цикл `for...in` — это хороший способ пройти по всем свойствам объекта, но стоит помнить несколько важных особенностей.

### Перечисляемые свойства

Перечисляемые свойства объекта — это свойства, которые явно помечены такими. Для удобства работы все свойства, которые добавляются к объекту, являются перечисляемыми по умолчанию. Создать не перечисляемые свойства можно с помощью метода `defineProperty`.

_Встроенные свойства не перечисляются_. Например метод [`indexOf`](/js/index-of/) у объекта `String` или метод [`toString`](/js/object-tostring/) у [любого объекта](/js/objects-objects-everywhere/) не участвуют в цикле `for...in`.

В цикле будут перечислены не только собственные свойства объекта, но и все перечисляемые свойства из прототипа объекта, прототипа прототипа и так далее:

```js
const a = { a: 1 }
const b = { b: 2 }
const c = { c: 3 }

Object.setPrototypeOf(b, a)
Object.setPrototypeOf(c, b)

for (const key in c) {
  console.log(key)
}
// c
// b
// a
```

Символьные свойства тоже не считаются перечисляемыми:

```js
const secret = Symbol('dislikes')
const movie = {title: "Властелин Колец", likes: 9999}
movie[secret] = -65400

for (const k in movie) {
  console.log(k)
}
// title
// likes
```

### Порядок перечисления

В стандарте языка нет описания того, как свойства должны перечисляться, потому порядок будет зависеть от реализации в конкретном движке браузера. Но есть базовые правила, которое можно встретить во всех браузерах:

1️⃣ Строковые имена свойств будут перечисляться в порядке их присвоения к объекту:

```js
const developer = {
  name: 'Ваня',
  language: 'JavaScript',
  company: 'Google'
}

for (const key in developer) {
  console.log(key)
}
// name
// language
// company
```

2️⃣ Числовые свойства будут перечисляться в отсортированном порядке по возрастанию:

```js
const booksById = {
  341: {
    name: 'Harry Potter'
  },
  144: {
    name: 'Flowers for Algernon'
  },
  202: {
    name: 'Lord of the Rings'
  }
}

for (const key in booksById) {
  console.log(key)
}
// 144
// 202
// 341
```

<aside>

❗️ Несмотря на договорённости о порядке вывода числовых ключей, не нужно использовать `for...in` для перебора массива. В будущем правила могут измениться. Для перебора у массива есть собственные методы: [`forEach`](/js/array-foreach/), [`map`](/js/array-map/) и другие. В этих методах порядок перебора гарантирован.

</aside>

### Изменение объекта во время перебора

Если во время выполнения `for...in` добавлять свойства в объект, то нет гарантии, что это свойство попадёт в цикл. Свойство, удалённое из объекта до того, как до него дошёл цикл, не будет участвовать в итерации.
